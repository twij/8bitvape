{% extends 'layouts/default' %}

{% block content %}



<div class="mix-container">
    <div class="mix-title">
        <div class="col">
            <h1>{{ mix.name }}</h1>
            <h2>by <a href="/?user={{ mix.user.username }}">{{ mix.user.username }}</a></h2>
        </div>
        <div class="col text-right">
            <p>Creator Rating: {{ mix.creator_rating }}/5</p>
        </div>
    </div>
    <div class="mix-description">
        <p>{{ mix.description|raw }}</p>
    </div>
    <div class="mix-recipe">
        {% for flavour in mix.flavours %}
            <div class="flavour">
                <div class="flavour">
                    <img src="/img/flavimg/{{ flavour.slug }}.png" alt="{{ flavour.name }}" />
                    <p><strong>{{ flavour.name|raw }}</strong> by {{ flavour.company.name }}</p>
                </div>
                <div class="amount">{{ flavour.pivot.percentage }}%</div>
            </div>
        {% endfor %}
    </div>
</div>

<div class="comment-title">
    <h1>{{ mix.comments|length }} comments</h1>
    <h1>Community Rating: {{ mix.rating }}/5</h1>
</div>

{% set comments = mix.comments().paginate(5) %}

{% if comments|length > 0 %}
    {% for comment in comments %}
        <div class="comment-container">
            <h1>{{ comment.user.username|default('Unknown') }}</h1>
            {% if comment.rating != 0 %}<h2>Rating: {{ comment.rating }}/5</h2>{% endif %}
            <p>{{ comment.comment|raw }}</p>
        </div>
    {% endfor %}

    {{ comments.links()|raw }}
{% endif %}

{% endblock %}